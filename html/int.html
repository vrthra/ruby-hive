<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <link type="text/css" rel="stylesheet" href="" >
    <link rel="stylesheet" type="text/css" href="hive.css" />
    <title>hive</title>
</head>
<body>
    <p class="head">
<table valign='top'><tr><td><a href="Hive.html"><img src="hive.png" alt="hive" width="50" height="50" border='0' /></a></td><br/><td> <a href="FrontPage.html">FrontPage</a> | <a href="HiveTraits.html">HiveTraits</a> </td><tr></table><br/>
    </p>
    <p class="content">
=================properties.rb=============<br/>#!/usr/local/bin/ruby<br/><table style='border-spacing: 10px;width:100%;' ><tr><td style='color:#ffd0d0'>class MyProperties<br/>&nbsp;&nbsp;&nbsp;&nbsp;def initialize(dfile)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;begin<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@mymap = {'defkey' => 'defvalue'}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;File.open(dfile) {|f|<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;read(f)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rescue Exception => e<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;puts e.message<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end<br/>&nbsp;&nbsp;&nbsp;&nbsp;end<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def read(fd)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fd.each do |line|<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case line<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;when /^#/,/^[ \t]*$/<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;when /^map:([^=]+)=(.+)$/<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@mymap[$1] = $2<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raise "Invalid format...#{line}"<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end<br/>&nbsp;&nbsp;&nbsp;&nbsp;end<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;def to_s<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@mymap.to_a.collect{|a| "#{a[0]} => #{a[1]}"}.join("\n")<br/>&nbsp;&nbsp;&nbsp;&nbsp;end<br/>end<br/><br/>puts MyProperties.new('datafile')<br/></td></tr></table>============================================<br/><br/><h2> irb</h2>&nbsp;&nbsp;&nbsp;&nbsp;the interactive shell for ruby.<br/><font color='white'>irb(main):001:0&gt;load 'properties.rb'<br/>a =&gt; aaa<br/>b =&gt; bbb<br/>defkey =&gt; defvalue<br/>=&gt; true<br/>irb&gt;<br/>irb&gt; p = MyProperties.new('datafile')<br/>=&gt; #<MyProperties:0x814e80c @mymap={"a"=>"aaa", "b"=>"bbb", "defkey"=>"defvalue"}><br/>irb&gt;<br/>irb&gt; p.inspect<br/>=&gt; "#<MyProperties:0x814e80c @mymap={\"a\"=>\"aaa\", \"b\"=>\"bbb\", \"defkey\"=>\"defvalue\"}>"<br/>irb&gt;<br/>irb&gt; p.methods<br/>=&gt; ["dup", "hash", "private_methods", "extend", "nil?", "__send__", "instance_eval", "tainted?", "class", "singleton_methods", "=", "untaint", "method", "kind_of?", "object_id", "instance_variable_get", "respond_to?", "read", "inspect", "frozen?", "display", "taint", "id", "public_methods", "equal?", "to_a", "clone", "protected_methods", "send", "freeze", "instance_variable_set", "type", "is_a?", "methods", "==", "instance_of?", "===", "instance_variables", "__id__", "eql?", "to_s"]<br/>irb&gt;<br/>irb&gt; p.class<br/>=&gt; MyProperties<br/>irb&gt; p.class.superclass<br/>=&gt; Object<br/>irb&gt;<br/><br/></font>
    </p>
    <p class="tail">
<br/>
    </p>
</body>
</html>
