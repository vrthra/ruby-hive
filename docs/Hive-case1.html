<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <link type="text/css" rel="stylesheet" href="hive.css" >
    <title>hive</title>
</head>
<body>
    <p class="head">
<table valign='top'><tr><td><a href="/ruby-hive/Hive.html"><img src="hive.png" alt="hive" width='50' height='50' border='0' /></a></td><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td><a href="http://github.com/vrthra/ruby-hive/">Code</a> |<a href="FrontPage.html">FrontPage</a> |<a href="HiveTraits.html">HiveTraits</a> </td><tr></table><br/>
    </p>
    <p class="content">
<a href="Hive-case1.html">Hive-case1</a><br/><br/>-> A watch needs to be set in 4 channels named #solaris #linux #windows #hpux.<br/>Each channel contains members who are also members in #hive. They need to start<br/>running a test case when they receive a notification that a download has been completed<br/>for them on each of the platforms.<br/><br/><h2> Setting up the downloaders.</h2>Let us name the channel #fetchbits where we have representatives from each of the operating systems<br/>going to download the bits needed to a common location.<br/><table class='code' border=0><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;</td><td class='term'><font color='blue'>|</font>cat fetchbits.seq<br/><font color='gray'> puts 'configuring #fetchbits'<br/> [:channel => '#fetchbits'<br/> !do <a href="i.html">$i:</a>say[runtests:#solaris,#linux,#windows,#hpux] when <a href="cron.html">$cron:</a>downloadwatch[0 0 1]<br/> ]<br/></font></td></tr></table><br/><h2> Setting up the watches in the four channels</h2>Assuming that each channels are populated by members of the corresponding operating system.<br/>A first cut would look like:<br/><br/><table class='code' border=0><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;</td><td class='term'><font color='blue'>|</font>cat solaris.seq<br/><font color='gray'> puts 'configuring #solaris'<br/> [:channel => '#solaris'<br/> !do <a href="pat.html">$pat:</a>start[-s alltests] when <a href="watch.html">$watch:</a>runtests[privmsg:^runtests]<br/> ]<br/></font></td></tr></table><br/>but this is tedious in the extreme to do for all channels, But<br/>we do have another option.<br/><br/><table class='code' border=0><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;</td><td class='term'><font color='blue'>|</font>cat runtests.seq<br/><font color='gray'> ['#solaris','#windows','#linux','#hpux'].each do |machine|<br/> puts 'configuring #{machine}'<br/> [:channel => machine<br/> !do <a href="pat.html">$pat:</a>start[-s alltests] when <a href="watch.html">$watch:</a>runtests[privmsg:^runtests]<br/> ]<br/> end<br/></font></td></tr></table><br/><h2>putting it all together</h2><br/><table class='code' border=0><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;</td><td class='term'><font color='blue'>|</font>cat case1.seq<br/><font color='gray'> puts 'configuring #fetchbits'<br/> [:channel => '#fetchbits'<br/> !do <a href="i.html">$i:</a>say[runtests:#solaris,#linux,#windows,#hpux] when <a href="cron.html">$cron:</a>downloadwatch[0 0 1]<br/> ]<br/> ['#solaris','#windows','#linux','#hpux'].each do |c|<br/> puts 'configuring #{c}'<br/> [:channel => c<br/> !do <a href="pat.html">$pat:</a>start[-s alltests] when <a href="watch.html">$watch:</a>runtests[privmsg:^runtests]<br/> ]<br/> end<br/></font></td></tr></table>And run it in #hive.<br/><table class='code' style='border-spacing: 10px;width:100%' ><tr><td class='code'>&nbsp;&nbsp; !do <a href="me.html">$me:</a>seq[case1]<br/></td></tr></table>
    </p>
</body>
</html>
