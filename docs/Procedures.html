<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <link type="text/css" rel="stylesheet" href="hive.css" >
    <title>hive</title>
</head>
<body>
    <p class="head">
<table valign='top'><tr><td><a href="/ruby-hive/Hive.html"><img src="hive.png" alt="hive" width='50' height='50' border='0' /></a></td><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td><a href="http://github.com/vrthra/ruby-hive/">Code</a> |<a href="FrontPage.html">FrontPage</a> |<a href="HiveTraits.html">HiveTraits</a> </td><tr></table><br/>
    </p>
    <p class="content">
<a href="Procedures.html">Procedures</a><br/><br/><h2>Creating Stored Procedures</h2><table class='code' style='border-spacing: 10px;width:100%' ><tr><td class='code'>procedure :os do |str|<br/>&nbsp;&nbsp;&nbsp;&nbsp;resp = []<br/>&nbsp;&nbsp;&nbsp;&nbsp;query 'select <a href="my.html">$my:</a>os from #hive' do |machine,value|<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resp &lt;&lt; {:machine =&gt; machine,:val =&gt; value}<br/>&nbsp;&nbsp;&nbsp;&nbsp;end<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;#sort them and send them back.<br/>&nbsp;&nbsp;&nbsp;&nbsp;resp.sort {|x,y| x[:val] &lt;=&gt; y[:val] }.each do |r|<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reply r[:machine] + ' -&gt; ' + r[:val]<br/>&nbsp;&nbsp;&nbsp;&nbsp;end<br/>end<br/><br/></td></tr></table><h2> Managing Stored Procedures</h2>&nbsp;&nbsp;:save ver=select <a href="sys.html">$sys:</a>version @0 @1 from #hive<br/>&nbsp;&nbsp;:list<br/>&nbsp;&nbsp;:show ver<br/>&nbsp;&nbsp;:use (normal from)<br/>&nbsp;&nbsp;:now<br/>&nbsp;&nbsp;:buf<br/>&nbsp;&nbsp;:reset<br/>&nbsp;&nbsp;:clear<br/><h2> Invoke.</h2>&nbsp;&nbsp;:$os<br/>&nbsp;&nbsp;:$os[args]<br/>&nbsp;&nbsp;:$ver[a,b]<br/>
    </p>
</body>
</html>
