<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <link type="text/css" rel="stylesheet" href="hive.css" >
    <title>hive</title>
</head>
<body>
    <p class="head">
<table valign='top'><tr><td><a href="/ruby-hive/Hive.html"><img src="hive.png" alt="hive" width='50' height='50' border='0' /></a></td><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td><a href="http://github.com/vrthra/ruby-hive/">Code</a> |<a href="FrontPage.html">FrontPage</a> |<a href="HiveTraits.html">HiveTraits</a> </td><tr></table><br/>
    </p>
    <p class="content">
<a href="Pat.1.html">Patterns</a><br/><br/>Patterns is a simple tool that can verify the output of an action.<br/><br/><br/>Minimum files:<br/>pat.rb, patscript.rb, patlog.rb, patlib.rb, matchworld.rb, connectors.rb, fetchlib.rb, transform.rb<br/><br/>pat.rb also accepts a .hiverc file in your home directory just like hiveclient.rb incase you have a webserver hosting the above files.<br/><br/>Using Patterns:<br/><br/>pat.rb -h<br/>Usage: pat.rb [options]<br/><br/>Specific options:<br/>&nbsp;&nbsp;&nbsp;&nbsp;-s, --seq=sequence&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The sequence of testcases<br/>&nbsp;&nbsp;&nbsp;&nbsp;-t, --timeout=timeout&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The max timeout in seconds<br/>&nbsp;&nbsp;&nbsp;&nbsp;-p, --proxy=proxyname:port&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The proxy against which you want to run the tests<br/>&nbsp;&nbsp;&nbsp;&nbsp;-r, --serverhost=serverhost:port Server name(opt)<br/>&nbsp;&nbsp;&nbsp;&nbsp;-v, --verbose=verbose&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Run verbosely [1..]<br/>&nbsp;&nbsp;&nbsp;&nbsp;-d, --[no-]dump&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dump evaluation<br/>&nbsp;&nbsp;&nbsp;&nbsp;-u, --usedump&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use earlier dumps<br/>&nbsp;&nbsp;&nbsp;&nbsp;-x, --ext a b c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use bt-backtrace, delim-dumpdelimmatch|time|xchars|debug<br/><br/>Common options:<br/>&nbsp;&nbsp;&nbsp;&nbsp;-g, --groups x y z&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; selected groups<br/>&nbsp;&nbsp;&nbsp;&nbsp;-h, --help&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Show this message<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--version&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Show version<br/><br/>Simple Scenario: Testing the output of a command line.<br/>1. Create a file called test.input<br/><br/> test.input:<br/> --begin--<br/> date: 20070816<br/> A simple input file<br/> --end---<br/><br/>We will pretend that the 'cat' command in unix is a command line that we want to test, which on finish<br/>outputs the above text.<br/><br/>2. Create the test case. catcli.pat<br/><br/> catcli.pat<br/> --begin--<br/> cr '102001'<br/> title 'simple minded cat'<br/> <a href="Cli.html">take Cli</a><br/> >[<br/> cat test.input<br/> ]<br/><br/> <[<br/> /date: [0-9]+/<br/> A simple input file<br/> ]<br/> --end---<br/><br/>Explanations:<br/>The cr and title are optional. If they are provided, it will be printed out along with the tests if a suitable verbosity is choosen.<br/><br/>the '<a href="Cli.html">take Cli</a>' is a command to choose the connector for this test case. (The default connector is always Http) the connectors.rb contains the other defined connectors that you can use (or you can add more of your own so long as you follow the connector interface.)<br/><br/>A connector can be thought of as specifying the behavior of your test case. In the above case, the command '<a href="Cli.html">take Cli</a>' changes the behavior of the following statements so that they execute a command line and returns back the result. (If you use the default connector, the behavior is that an HTTP request will be sent to the server that you specify, and the result of that command will be returned for verification.)<br/><br/>The .pat files follow ruby syntax. (Actually they are ruby files extended with some preprocessor statements.)<br/>the '>[' specifies that what comes between it and the corresponding ']' are sent to the current connection as input.<br/>the '<[' is the verifier that verifies what is returned from the current connection. The preprocessor commands '>[', '<[' and close ']' needs<br/>to be at the starting of the line in order to be considered as preprocessor statements. (no space in front)<br/><br/>The verifier syntax allows regular expressions to be used. They have to start with '/' and end with '/'.<br/><br/>3. Execution of the above.<br/><br/> |./pat.rb -s catcli.pat<br/> catcli successfully completed<br/><br/>increasing the verbosity<br/> |./pat.rb -s catcli.pat -v 10 -x debug&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/> cr:102001<br/> [simple minded cat]<br/><br/> >===========><br/> cat test.input<br/> <br/> >===========><br/> <br/> <===========<<br/> date: 20070816<br/> A simple input file<br/>&nbsp;&nbsp;<br/> <br/> <===========<<br/> exp: /date: [0-9]+/<br/> exp: a simple input file<br/> catcli successfully completed<br/><br/>4. When it fails<br/> change the catcli.pat slightly so that instead of /date: [0-9]+/ it is /date= [0-9]+/<br/><br/> |./pat.rb -s catcli.pat -v 10 -x debug<br/> cr:102001<br/> [simple minded cat]<br/><br/> >===========><br/> cat test.input<br/><br/> >===========><br/><br/> <===========<<br/> date: 20070816<br/> A simple input file<br/> <br/><br/> <===========<<br/> exp: /date= [0-9]+/<br/> Cause: catcli [/date= [0-9]+/]<br/> catcli failed<br/> Failure: 1<br/> <br/><br/><a href="PatConnectors.html">PatConnectors</a><br/><br/><a href="PatExamples.html">PatExamples</a><br/>
    </p>
</body>
</html>
